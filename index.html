<!DOCTYPE html>
<html>
<head>
    <title>Camera Capture</title>
    <style>
        body { display: flex; flex-direction: column; align-items: center; }
        video { width: 640px; height: 480px; border: 2px solid #333; }
        button { 
            margin: 20px; 
            padding: 15px 30px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        canvas { display: none; }
    </style>
</head>
<body>
    <video id="videoElement" playsinline autoplay></video>
    <button id="captureBtn">Take Photo</button>
    <canvas id="canvasElement"></canvas>

    <script>
        const video = document.getElementById('videoElement');
        const canvas = document.getElementById('canvasElement');
        const captureBtn = document.getElementById('captureBtn');

        // Initialize camera access
        async function initCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        width: { ideal: 1280 },
                        height: { ideal: 720 },
                        facingMode: "user" // Front camera
                    }
                });
                
                video.srcObject = stream;
                video.onloadedmetadata = () => {
                    video.play();
                    captureBtn.disabled = false;
                };
                
            } catch (error) {
                console.error('Camera Error:', error);
                alert('Failed to access camera: ' + error.message);
            }
        }

        // Capture photo from video stream
        function capturePhoto() {
            // Set canvas dimensions to match video stream
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            // Draw current video frame to canvas
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // Convert to downloadable image
            const imageUrl = canvas.toDataURL('image/jpeg', 0.9);
            const link = document.createElement('a');
            link.download = 'capture.jpg';
            link.href = imageUrl;
            link.click();
        }

        // Event listeners
        captureBtn.addEventListener('click', capturePhoto);
        window.addEventListener('load', initCamera);
    </script>
</body>
</html>
